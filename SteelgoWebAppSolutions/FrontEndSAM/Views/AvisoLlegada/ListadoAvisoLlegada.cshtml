
@{
    ViewBag.Title = "ListadoAvisoLlegada";
}

<h2>ListadoAvisoLlegada</h2>
<div class="form">
        <div class="form-group">
           <div id="grid"></div>
        </div>
</div>
   

<script>
    @section JavascriptGlobalVariables {
    //your partial views variables

    }

    @section JavascriptGlobalFunctions {
    function changeLanguageCall(){
        CargarGridAvisoLlegada();
    }
    //Your partial views specific functions
        function CargarGridAvisoLlegada()
        {
            $("#grid").kendoGrid({
                dataSource: {
                    type: "json",
                    transport: {
                        read: "http://localhost:60960/backendsam/api/DummyListadoAvisoLlegada"
                    },
                    schema: {
                        model: {
                            fields: {
                                FolioAvisoLlegadaID: { type: "number" }
                            }
                        }
                    },
                    pageSize: 20,
                    serverPaging: false,
                    serverFiltering: false,
                    serverSorting: false
                },
                height: 550,
                sortable: true,
                filterable: true,
                pageable: {
                    refresh: false,
                    pageSizes: false

                },
                columns: [
                    { field: "FolioAvisoLlegadaID", title: _dictionary.ListadoAvisoLlegada0001[$("#language").data("kendoDropDownList").value()], width: "200px", filterable : true },
                    { command: { text: _dictionary.ListadoAvisoLlegada0003[$("#language").data("kendoDropDownList").value()], click: showDetails }, title: " ", width: "130px" },
                    { command: { text: _dictionary.ListadoAvisoLlegada0002[$("#language").data("kendoDropDownList").value()], click: borrarFolio }, title: " ", width: "130px" }
                    ]
            });
        }


        function showDetails(e)
        {
            e.preventDefault();
            var tr = $(e.target).closest("tr"); // get the current table row (tr)
            var data = this.dataItem(tr);
            //REDIRECT
            var detalleIdeaUrl = "@Url.Action("DetalleAvisoLLegada", "AvisoLLegada")";
            alert(detalleIdeaUrl + "?leng=" + $("#language").data("kendoDropDownList").value() + "&folio=" + data.FolioAvisoLlegadaID);
            window.location.href = detalleIdeaUrl + "?leng=" + $("#language").data("kendoDropDownList").value() + "&folio=" + data.FolioAvisoLlegadaID;
        }

        function borrarFolio(e) {
            e.preventDefault();
            var tr = $(e.target).closest("tr"); // get the current table row (tr)
            var data = this.dataItem(tr);
            $BackEndSAM.DummyListadoAvisoLlegada.destroy({}, { folio: data.FolioAvisoLlegadaID }).done(function (data) {
                console.log(data);
            });
        }
    }

    @section JavascriptDocumentReadyFunctions {
    //Your partial view document ready functions
    }
</script>

