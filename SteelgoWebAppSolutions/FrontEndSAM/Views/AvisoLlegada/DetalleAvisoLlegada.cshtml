@{
    ViewBag.Title = "DetalleAvisoLlegada";
     Layout = "~/Views/Shared/_Layout.cshtml";
}

@section breadcrumb {
    <li>
        <a href="@Url.Action("landing", "Home")"><span id="DetalleAvisoLlegada0050"></span></a>
    </li>
    <li>
        <a href="@Url.Action("DashboardAvisoLlegada", "AvisoLlegada")"><span id="DetalleAvisoLlegada0087"></span></a>
    </li>
    <li>
        <a href="@Url.Action("ListadoAvisoLlegada", "AvisoLlegada")"><span id="DetalleAvisoLlegada0051"></span></a>
    </li>
    <li class="active">
        <a href="@Url.Action("DetalleAvisoLlegada", "AvisoLlegada")"><span id="DetalleAvisoLlegada0052"></span></a>
    </li>
}

<div id="formAvisoLlegada" class="form clearfix col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <span id="divFolio" class="folioLabel hidden">
                <span id="DetalleAvisoLlegada0042"></span>
                <span id="spanFolio"></span>
                <span id="DetalleAvisoLlegada0053">Status</span>
                <span id="DetalleAvisoLlegada0084"></span>
                <span id="DetalleAvisoLlegada0085"></span>
                <span id="DetalleAvisoLlegada0086"></span>
                <span id="DetalleAvisoLlegada0088"></span>
                <div class="branchCut"></div>
            </span>
            <div class="formNav clearfix">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="button-section editButtonSection">                        
                            <div class="btn-group save-group">
                                <button id="Guardar" onclick="javascript:void(0);" type="button" class="btn btn-yellow"><span id="DetalleAvisoLlegada0017"></span></button>
                                <button id="Editar" onclick="javascript:void(0);" type="button" class="btn btn-yellow" style="display:none"><span id="DetalleAvisoLlegada0082"></span></button>
                                <button id="dropdown-toggle" type="button" class="btn btn-yellow dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="caretWhite"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#" id="GuardarNuevo"><span id="DetalleAvisoLlegada0062"></span></a></li>
                                    <li><a href="#"><span id="DetalleAvisoLlegada0063"></span></a></li>
                                </ul>
                            </div>
                            <a id="Cancelar" class="btn btn-black"><span id="DetalleAvisoLlegada0018"></span></a>
                        </div>
                        <div id="TramitarPermisoDiv" class="button-section">
                            <a id="TramitarPermiso" href="#" class="btn btn-primary"><span id="DetalleAvisoLlegada0036"></span></a>
                        </div>
                        <div class="button-section actionButtonSection">
                            <div class="dropdown action-group">
                                <a id="Acciones" data-target="#" href="#" data-toggle="dropdown" role="button" ariahaspopup="true" aria-expanded="false" class="btn btn-default">
                                    <span id="DetalleAvisoLlegada0064"></span>
                                    <span class="caretBlue"></span>
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="Acciones">
                                    <li><a id="RedirectDashboard" ><span id="DetalleAvisoLlegada0065"></span></a></li>
                                    <li><a><span id="DetalleAvisoLlegada0066"></span></a></li>
                                    <li><a id="CancelarFolio" href="#"><span id="DetalleAvisoLlegada0083"></span></a></li>
                                </ul>
                            </div>
                        </div>
                        <a id="Imprimir" href="#" class="btn btn-fadeBlue actionButtonSection"></a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-11">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="row">
                                <div id="TipoAvisoDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0074"></label>
                                    <input id="TipoAvisoID" class="" />
                                </div>
                                <div id="ClienteDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0067" ></label>
                                    <input id="ClienteID" />
                                </div>
                                <div id="ProyectoDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0001"></label>
                                    <input id="ProyectoID" />
                                </div>
                                <div id="FechaRecepcionDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0004"></label>
                                    <input id="FechaRecepcion" />
                                </div>
                                <div class="visible-lg col-sm-12 col-md-12 col-lg-12"></div>
                                <div id="PatioDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0008" ></label>
                                    <input id="PatioID" class="" />
                                </div>
                                <div id="TransportistaDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0003"></label>
                                    <input id="TransportistaID" class="" />
                                </div>
                                <div id="ChoferDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0009"></label>
                                    <input id="ChoferID" class="" />
                                </div>
                                <div id="TractoDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0055"></label>
                                    <input id="Tracto" class="" />
                                </div>
                                <div class="visible-lg col-sm-12 col-md-12 col-lg-12"></div>
                                <div id="PlanaDiv" class="form-group col-sm-6 col-md-6 col-lg-3">
                                    <label id="DetalleAvisoLlegada0006"></label>
                                    <input id="PlanaID" class="" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="addedSection clearfix">
                    <div class="form-group col-sm-12 col-md-12 col-lg-12">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <label id="DetalleAvisoLlegada0010"></label>
                            <div class="row">
                                <div id="TipoArchivoDiv" class="col-sm-5 col-md-6 col-lg-2">
                                    <input id="TipoArchivo" class="" />
                                </div>
                                <div id="filesDiv" class="col-sm-7 col-md-6 col-lg-5">
                                    <input name="files" id="files" type="file" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-sm-12 col-md-12 col-lg-12">
                        <div id="listaArchivosDiv" class="col-sm-12 col-md-12 col-lg-12">
                            <table id="listaArchivos" class="filesTable">
                                <thead>
                                    <tr>
                                        <td>
                                            <label id="DetalleAvisoLlegada0045"></label>
                                        </td>
                                        <td>
                                            <label id="DetalleAvisoLlegada0046"></label>
                                        </td>
                                        <td>
                                            <label id="DetalleAvisoLlegada0047"></label>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*Ventana Modal*@
    <div id="window">
        @*Content of the Window*@
        <div id="modalTransportista" style="display: none">
            <div class="alert-container">
                <div class="message">
                    Mensaje de éxito/error/advertencia
                </div>
            </div>
            <div id="ContactoID_TransportistaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0012"></label>
                <input id="ContactoID_Transportista" class="" />
            </div>
            <div id="Nombre_TransportistaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0013"></label>
                <input id="Nombre_Transportista" class="" />
            </div>
            <div id="Descripcion_TransportistaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0014"></label>
                <input id="Descripcion_Transportista" class="" />
            </div>
            <div id="Direccion_TransportistaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0015"></label>
                <input id="Direccion_Transportista" class="" />
            </div>
            <div id="Telefono_TransportistaDiv" class ="form-group">
                <label id="DetalleAvisoLlegada0016"></label>
                <input id="Telefono_Transportista" class="" />
            </div>
            <div class="buttonSave">
                <a id="GuardarTransportista" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0019"></span>
                </a>
                <a id="CancelarTransportista" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0076"></span>
                </a>
            </div>
        </div>
        @*<div id="modalProveedor" style="display: none">
            <div class="alert-container">
                <div class="message">
                    Mensaje de éxito/error/advertencia
                </div>
            </div>
            <div class="form-group">
                <label id="DetalleAvisoLlegada0020"></label>
                <input id="ContactoID_Proveedor" class="" />
            </div>
            <div class="form-group">
                <label id="DetalleAvisoLlegada0021"></label>
                <input id="Nombre_Proveedor" class="" />
            </div>
            <div class="form-group">
                <label id="DetalleAvisoLlegada0022"></label>
                <input id="Descripcion_Proveedor" class="" />
            </div>
            <div class="form-group">
                <label id="DetalleAvisoLlegada0023"></label>
                <input id="Direccion_Proveedor" class="" />
            </div>
            <div class="form-group">
                <label id="DetalleAvisoLlegada0024"></label>
                <input id="Telefono_Proveedor" class="" />
            </div>
            <div class="buttonSave">
                <a id="GuardarProveedor" href="javascript:void(0);" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0025"></span>
                </a>
                <a id="CancelarProveedor" href="javascript:void(0);" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0077"></span>
                </a>
            </div>
        </div>*@

        <div id="modalPatio" style="display: none">
            <div class="alert-container">
                <div class="message">
                    Mensaje de éxito/error/advertencia
                </div>
            </div>
            <div id="Nombre_PatioDiv" class="form-group">
                <label id="DetalleAvisoLlegada0026"></label>
                <input id="Nombre_Patio" class="" />
            </div>
            <div id="Propietario_PatioDiv" class="form-group">
                <label id="DetalleAvisoLlegada0027"></label>
                <input id="Propietario_Patio" class="" />
            </div>
            <div id="Descripcion_PatioDiv" class ="form-group">
                <label id="DetalleAvisoLlegada0028"></label>
                <input id="Descripcion_Patio" class="l" />
            </div>
            <div id="RequierePermisoAduana_PatioDiv" class="form-group">
                <label id="DetalleAvisoLlegada0075" class="checkLabel"></label>
                <input id="RequierePermisoAduana_Patio" class="l" type="checkbox" />
            </div>
            <div class="buttonSave">
                <a id="GuardarPatio" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0029"></span>
                </a>
                <a id="CancelarPatio" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0078"></span>
                </a>
            </div>
        </div>

        <div id="modalChofer" style="display: none">
            <div class="alert-container">
                <div class="message">
                    Mensaje de éxito/error/advertencia
                </div>
            </div>
            <div id="Nombre_ChoferDiv" class="form-group">
                <label id="DetalleAvisoLlegada0030"></label>
                <input id="Nombre_Chofer" class="" />
            </div>
            <div class="buttonSave">
                <a id="GuardarChofer" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0031"></span>
                </a>
                <a id="CancelarChofer" href="# class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0079"></span>
                </a>
            </div>
        </div>

        <div id="modalPlana" style="display: none">
            <div class="alert-container">
                <div class="message">
                    Mensaje de éxito/error/advertencia
                </div>
            </div>
            <div id="TipoVehiculo_PlanaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0068"></label>
                <input id="TipoVehiculo_Plana" class="" />
            </div>
            <div id="CamionID_PlanaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0032"></label>
                <input id="CamionID_Plana" class="" />
            </div>
            <div id="Placas_PlanaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0033"></label>
                <input id="Placas_Plana" class="" />
            </div>
            <div id="Unidad_PlanaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0069"></label>
                <input id="Unidad_Plana" class="" />
            </div>
            <div id="Modelo_PlanaDiv" class="form-group">
                <label id="DetalleAvisoLlegada0070"></label>
                <input id="Modelo_Plana" class="" />
            </div>
            <div class="buttonSave">
                <a id="GuardarPlana" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0034"></span>
                </a>
                <a id="CancelarPlana" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0080"></span>
                </a>
            </div>
        </div>
        <div id="modalCamion" style="display: none">
            <div class="alert-container">
                <div class="message">
                    Mensaje de éxito/error/advertencia
                </div>
            </div>
            <div id="TipoVehiculo_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0071"></label>
                <input id="TipoVehiculo_Camion" class="" />
            </div>
            <div id="TransportistaID_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0056"></label>
                <input id="TransportistaID_Camion" class="" />
            </div>
            <div id="ChoferID_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0057"></label>
                <input id="ChoferID_Camion" class="" />
            </div>
            <div id="Placas_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0058"></label>
                <input id="Placas_Camion" class="" />
            </div>
            <div id="TarjetaCirculacion_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0059"></label>
                <input id="TarjetaCirculacion_Camion" class="" />
            </div>
            <div id="PolizaSeguroDiv" class="form-group">
                <label id="DetalleAvisoLlegada0060"></label>
                <input id="PolizaSeguro" class="" />
            </div>
            <div id="Unidad_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0072"></label>
                <input id="Unidad_Camion" class="" />
            </div>
            <div id="Modelo_CamionDiv" class="form-group">
                <label id="DetalleAvisoLlegada0073"></label>
                <input id="Modelo_Camion" class="" />
            </div>
            <div class="buttonSave">
                <a id="GuardarCamion" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0061"></span>
                </a>
                <a id="CancelarCamion" href="#" class="btn btn-primary">
                    <span id="DetalleAvisoLlegada0081"></span>
                </a>
            </div>
        </div>
    </div>

<input id="hdPermisoAutorizado" type="hidden" value="false" />
<input id="hdPermisoTramite" type="hidden" />
<input id="hdPaseSalida" type="hidden" value="" />
<input id="hdArchivoAutorizado" type="hidden" value="" />

<script>
    kendo.ui.Upload.fn._supportsDrop = function () { return false; }
    @section JavascriptGlobalVariables {
        //your partial views variables
        var FechaRecepcion;
        var folio = getUrlParameter("folio", "-1");
        var _tipoArchivo = 0;
        var Transportista = [], Proveedor = [], Patio = [],
            Plana = [], Chofer = [], Contacto = [], Camion = [],
            CamionEntradaMaterial = {}, TransportistaCamion = [],
            ChoferCamion = [], TipoVehiculoTracto = [], TipoVehiculoPlana = [],
            Cliente = {}, TipoAvisos = {}, TipoArchivo = {};

        var $AvisoLLegadaModel = {
            listContainer: {
                create: ".nextStepButtonSection",
                list: ".actionButtonSection",
                detail: ".editButtonSection",
                destroy: ""
            },
            properties: {
                tipoAviso: {
                    visible: "#TipoAvisoDiv",
                    editable: "#TipoAvisoID",
                    required: "#TipoAvisoID"
                },
                cliente: {
                    visible: "#ClienteDiv",
                    editable: "#ClienteID",
                    required: "#ClienteID"
                },
                proyecto: {
                    visible: "#ProyectoDiv",
                    editable: "#ProyectoID",
                    required: "#ProyectoID"
                },
                fecharecepcion: {
                    visible: "#FechaRecepcionDiv",
                    editable: "#FechaRecepcion",
                    required: "#FechaRecepcion"
                },
                patio: {
                    visible: "#PatioDiv",
                    editable: "#PatioID",
                    required: "#PatioID"
                },
                transportista: {
                    visible: "#TransportistaDiv",
                    editable: "#TransportistaID",
                    required: "#TransportistaID"
                },
                tracto: {
                    visible: "#TractoDiv",
                    editable: "#Tracto",
                    required: "#Tracto"
                },
                plana: {
                    visible: "#PlanaDiv",
                    editable: "#PlanaID",
                    required: "#PlanaID"
                },
                chofer: {
                    visible: "#ChoferDiv",
                    editable: "#ChoferID",
                    required: "#ChoferID"
                },
                tipoArchivo: {
                    visible: "#TipoArchivoDiv",
                    editable: "#TipoArchivo",
                    required: "#TipoArchivo"
                },
                seleccionarArchivo: {
                    visible: "#filesDiv",
                    editable: "#files",
                    required: "#files"
                },
                listarArchivos: {
                    visible: "#listaArchivosDiv",
                    editable: "#listaArchivos",
                    required: "#listaArchivos"
                }
            }
        };

        var $PermisoAduanaModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                generar: {
                    visible: "#TramitarPermisoDiv",
                    editable: "#TramitarPermiso",
                    required: "#TramitarPermiso"
                }
            }
        };

        var $PatioModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                nombre: {
                    visible: "#Nombre_PatioDiv",
                    editable: "#Nombre_Patio",
                    required: "#Nombre_Patio"
                },
                propietario: {
                    visible: "#Propietario_PatioDiv",
                    editable: "#Propietario_Patio",
                    required: "#Propietario_Patio"
                },
                descripcion: {
                    visible: "#Descripcion_PatioDiv",
                    editable: "#Descripcion_Patio",
                    required: "#Descripcion_Patio"
                },
                requierepermiso: {
                    visible: "#RequierePermisoAduana_PatioDiv",
                    editable: "#RequierePermisoAduana_Patio",
                    required: "#RequierePermisoAduana_Patio"
                }
            }
        };

        var $TransportistaModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                contacto: {
                    visible: "#ContactoID_TransportistaDiv",
                    editable: "#ContactoID_Transportista",
                    required: "#ContactoID_Transportista"
                },
                nombre: {
                    visible: "#Nombre_TransportistaDiv",
                    editable: "#Nombre_Transportista",
                    required: "#Nombre_Transportista"
                },
                descripcion: {
                    visible: "#Descripcion_TransportistaDiv",
                    editable: "#Descripcion_Transportista",
                    required: "#Descripcion_Transportista"
                },
                direccion: {
                    visible: "#Direccion_TransportistaDiv",
                    editable: "#Direccion_Transportista",
                    required: "#Direccion_Transportista"
                },
                telefono: {
                    visible: "#Telefono_TransportistaDiv",
                    editable: "#Telefono_Transportista",
                    required: "#Telefono_Transportista"
                }
            }
        };

        var $ChoferModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                contacto: {
                    visible: "#Nombre_ChoferDiv",
                    editable: "#Nombre_Chofer",
                    required: "#Nombre_Chofer"
                }
            }
        };

        var $TractoModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                tipoVehiculo: {
                    visible: "#TipoVehiculo_CamionDiv",
                    editable: "#TipoVehiculo_Camion",
                    required: "#TipoVehiculo_Camion"
                },
                chofer: {
                    visible: "#ChoferID_CamionDiv",
                    editable: "#ChoferID_Camion",
                    required: "#ChoferID_Camion"
                },
                placas: {
                    visible: "#Placas_CamionDiv",
                    editable: "#Placas_Camion",
                    required: "#Placas_Camion"
                },
                tarjetacirculacion: {
                    visible: "#TarjetaCirculacion_CamionDiv",
                    editable: "#TarjetaCirculacion_Camion",
                    required: "#TarjetaCirculacion_Camion"
                },
                poliza: {
                    visible: "#PolizaSeguroDiv",
                    editable: "#PolizaSeguro",
                    required: "#PolizaSeguro"
                },
                unidad: {
                    visible: "#Unidad_CamionDiv",
                    editable: "#Unidad_Camion",
                    required: "#Unidad_Camion"
                },
                modelo: {
                    visible: "#Modelo_CamionDiv",
                    editable: "#Modelo_Camion",
                    required: "#Modelo_Camion"
                },
            }
        };

        var $PlanaModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                tipoVehiculo: {
                    visible: "#TipoVehiculo_PlanaDiv",
                    editable: "#TipoVehiculo_Plana",
                    required: "#TipoVehiculo_Plana"
                },
                camion: {
                    visible: "#CamionID_PlanaDiv",
                    editable: "#CamionID_Plana",
                    required: "#CamionID_Plana"
                },
                placas: {
                    visible: "#Placas_PlanaDiv",
                    editable: "#Placas_Plana",
                    required: "#Placas_Plana"
                },
                unidad: {
                    visible: "#Unidad_PlanaDiv",
                    editable: "#Unidad_Plana",
                    required: "#Unidad_Plana"
                },
                modelo: {
                    visible: "#Modelo_PlanaDiv",
                    editable: "#Modelo_Plana",
                    required: "#Modelo_Plana"
                }
            }
        };
    }

    @section JavascriptGlobalFunctions {
            function changeDatePickerDateFormat(datePickerOptions)
            {
                FechaRecepcion.setOptions(datePickerOptions);
            };

            function validarRequeridosFormaAvisoLlegada() {
                var bool = true;
                $("#formAvisoLlegada .security_required").each(function (i, elem) {
                    if (elem.tagName.toLowerCase() != 'label') {

                        switch ($(elem).attr("id"))
                        {
                            case 'ProyectoID':
                                if ($(elem).attr("id") == 'ProyectoID') {
                                    if (!$("#ProyectoID").data("kendoMultiSelect").value().length > 0) {
                                        bool = false;
                                        //$(this).addClass("error");
                                        $(this).closest("div").find("label").addClass("error");
                                    } else {
                                        $(this).closest("div").find("label").removeClass("error");
                                    };
                                };
                                break;
                            case 'PlanaID':
                                if ($(elem).attr("id") == 'PlanaID') {
                                    if (!$("#PlanaID").data("kendoMultiSelect").value().length > 0) {
                                        bool = false;
                                        //$(this).addClass("error");
                                        $(this).closest("div").find("label").addClass("error");
                                    } else {
                                        $(this).closest("div").find("label").removeClass("error");
                                    };
                                };
                                break;
                            default:
                                if (!$(this).val()) {
                                    bool = false;
                                    //$(this).addClass("error");
                                    $(this).closest("div").find("label").addClass("error");
                                } else {
                                    $(this).closest("div").find("label").removeClass("error");
                                };
                                break;

                        };
                    };
                });
                return bool;
            };

            function validarRequeridosModalTransportista() {
                var bool = true;
                $("#modalTransportista .security_required").each(function (i, elem) {
                    if (elem.tagName.toLowerCase() != 'label') {
                        if (!$(this).val()) {
                            bool = false;
                            //$(this).addClass("error");
                            $(this).closest("div").find("label").addClass("error");
                            $(this).closest("div").addClass("clearfix");
                        } else {
                            $(this).closest("div").find("label").removeClass("error");
                            $(this).closest("div").removeClass("clearfix");
                        };
                    };
                });
                return bool;
            };

            function validarRequeridosModalPatio() {
                var bool = true;
                $("#modalPatio .security_required").each(function (i, elem) {
                    if (elem.tagName.toLowerCase() != 'label') {
                        if (!$(this).val()) {
                            bool = false;
                            //$(this).addClass("error");
                            $(this).closest("div").find("label").addClass("error");
                            $(this).closest("div").addClass("clearfix");
                        } else {
                            $(this).closest("div").find("label").removeClass("error");
                            $(this).closest("div").removeClass("clearfix");
                        };
                    };
                });
                return bool;
            };
            
            function validarRequeridosModalPlana() {
                var bool = true;
                $("#modalPlana .security_required").each(function (i, elem) {
                    if (elem.tagName.toLowerCase() != 'label') {
                        if (!$(this).val()) {
                            bool = false;
                            //$(this).addClass("error");
                            $(this).closest("div").find("label").addClass("error");
                            $(this).closest("div").addClass("clearfix");
                        } else {
                            $(this).closest("div").find("label").removeClass("error");
                            $(this).closest("div").removeClass("clearfix");
                        };
                    };
                });
                return bool;
            };

            function validarRequeridosModalCamion() {
                var bool = true;
                $("#modalCamion .security_required").each(function (i, elem) {
                    if (elem.tagName.toLowerCase() != 'label') {
                        if (!$(this).val()) {
                            bool = false;
                            //$(this).addClass("error");
                            $(this).closest("div").find("label").addClass("error");
                            (this).closest("div").addClass("clearfix");
                        } else {
                            $(this).closest("div").find("label").removeClass("error");
                            $(this).closest("div").removeClass("clearfix");
                        };
                    };
                });
                return bool;
            };

            //Your partial views specific functions
            function CargaInicial() {
                ocultarStatus();

                FechaRecepcion = new kendo.ui.DatePicker($("#FechaRecepcion"));


                //**Eventos
                $("#Guardar").click(function (e) {
                    if(validarRequeridosFormaAvisoLlegada()){
                        GuardarAvisoLlegada();
                    } else {
                        displayMessage("notificationslabel0031", "", '1');
                    }
                });

                $("#GuardarNuevo").click(function (e) {
                    if (validarRequeridosFormaAvisoLlegada()) {
                        var detalleIdeaUrl = "@Url.Action("DetalleAvisoLlegada", "AvisoLLegada")";
                        window.location.href = detalleIdeaUrl + "?leng=" + $("#language").data("kendoDropDownList").value();
                    } else {
                        displayMessage("notificationslabel0031", "", 1);
                    };
                });
                
                $("#Editar").click(function (e) {
                    ObtenerPatioRequierePermiso();
                    BotonEdicion();
                    $("#files").data("kendoUpload").enable();
                });

                $("#Cancelar").click(function (e) {
                    var detalleIdeaUrl = "@Url.Action("ListadoAvisoLLegada", "AvisoLLegada")";
                    window.location.href = detalleIdeaUrl + "?leng=" + $("#language").data("kendoDropDownList").value();
                });

                $("#CancelarFolio").click(function (e) {
                    cancelarFolio();
                });

                $("#RedirectDashboard").click(function (e) {
                    var detalleIdeaUrl = "@Url.Action("DashboardAvisoLlegada", "AvisoLLegada")";
                    window.location.href = detalleIdeaUrl + "?leng=" + $("#language").data("kendoDropDownList").value();
                });

                //**Modales
                $("#GuardarTransportista").click(function (e) {
                    if (validarRequeridosModalTransportista()) {
                        GuardarTransportista();
                    } else {
                        displayMessage("notificationslabel0031", "", '1');
                    };
                });

                //$("#GuardarProveedor").click(function (e) { GuardarProveedor(); });
                $("#GuardarPatio").click(function (e) {
                    if (validarRequeridosModalPatio()) {
                        GuardarPatio();
                    } else {
                        displayMessage("notificationslabel0031", "", '1');
                    };
                });
                $("#GuardarChofer").click(function (e) { GuardarChofer(); });
                $("#GuardarPlana").click(function (e) {
                    if (validarRequeridosModalPlana()) {
                        GuardarPlana();
                    } else {
                        displayMessage("notificationslabel0031", "", '1');
                    };
                });
                $("#GuardarCamion").click(function (e) {
                    if (validarRequeridosModalCamion()) {
                        GuardarCamion();
                    } else {
                        displayMessage("notificationslabel0031", "", '1');
                    };
                });
                //**
                //Cancelar modales
                $("#CancelarTransportista").click(function (e) { CancelarTransportista(); });
                $("#CancelarProveedor").click(function (e) { CancelarProveedor(); });
                $("#CancelarPatio").click(function (e) { CancelarPatio(); });
                $("#CancelarChofer").click(function (e) { CancelarChofer(); });
                $("#CancelarPlana").click(function (e) { CancelarPlana(); });
                $("#CancelarCamion").click(function (e) { CancelarCamion(); });
                
               
                //Permiso Aduana
                $("#TramitarPermiso").attr('disabled', 'disabled');
                $("#TramitarPermiso").click(function () { GenerarPermiso(); });
                //Pase Salida
                $("#ImprimirPase").click(function () {
                    if ($('#listaArchivosPaseSalida > tbody  > tr').length <= 0) {
                        displayMessage("notificationslabel0010", "", '1');
                        return false;
                    };
                    $("#hdPaseSalida").val(1);
                    $("#PackingList").kendoUpload({
                        enabled: false
                    });               
                    window.open("@Url.Action("FormatoPaseSalida", "AvisoLlegada")");
                });

                $("#ClienteID").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "ClienteID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarCliente(dataItem.ClienteID, dataItem.Nombre);
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            Cliente = [];
                        };
                    },
                    filter: "contains",
                });
                ObtenerCliente();

                $("#TipoAvisoID").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "TipoAvisoID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarTipoAviso(dataItem.TipoAvisoID, dataItem.Nombre);
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            TipoAvisos = {};
                        };
                    },
                    filter: "contains",
                });
                ObtenerTipoAviso();
                
                $("#ProyectoID").kendoMultiSelect({
                    dataTextField: "Nombre",
                    dataValueField: "ProyectoID",
                    filter: "contains",
                });
                ObtenerProyectos();

                $("#TransportistaID").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "TransportistaID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        if (dataItem.TransportistaID == 0) {
                            VentanaModal(1);
                            e.preventDefault();
                        }
                        ObtenerChofer(dataItem.TransportistaID);
                        CargarTransportista(dataItem.TransportistaID, dataItem.Nombre);
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            Transportista = [];
                        };
                    },
                    filter: "contains",
                });
                ObtenerTransportista();

                $("#PlanaID").kendoMultiSelect({
                    dataTextField: "Nombre",
                    dataValueField: "PlanaID",
                    filter: "contains",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        if (dataItem.PlanaID == 0) {
                            VentanaModal(3);
                            e.preventDefault();

                            var combobox = $("#TipoVehiculo_Plana").data("kendoComboBox");
                            combobox.select(function (dataItem) {
                                if (dataItem.Nombre == "Plana") {
                                    CargarTipoVehiculoPlana(dataItem.TipoVehiculoID, dataItem.Nombre);
                                    return dataItem.Nombre === "Plana";
                                }
                            });
                        }
                    }
                });
                ObtenerPlanas();

                $("#PatioID").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "PatioID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        if (dataItem.PatioID == 0) {
                            VentanaModal(4);
                            e.preventDefault();
                        }
                        CargarPatio(dataItem.PatioID, dataItem.Nombre);
                        ObtenerPatioRequierePermiso();
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            Patio = [];
                        };
                    },
                    filter: "contains",
                });
                ObtenerPatio();

                $("#ChoferID").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "ChoferID",
                    //dataTextField: "Nombre",
                    //dataValueField: "ChoferID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        if (dataItem.ChoferID == 0) {
                            VentanaModal(5);
                            e.preventDefault();
                        }
                        CargarChofer(dataItem.ChoferID, dataItem.Nombre);

                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            Chofer = [];
                        };
                    },
                    filter: "contains",
                });
                //ObtenerChofer();

                $("#TipoArchivo").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "TipoArchivoID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        _tipoArchivo = dataItem.TipoArchivoID;
                        CargarTipoArchivo(dataItem.TipoArchivoID, dataItem.Nombre);
                    },
                    filter: "contains",
                });
                ObtenerTipoArchivo();
                
                $('#files').kendoUpload({
                    async: {
                        ////VAlida que este tomando todos los parametros por favor
                        saveUrl: "http://localhost:60960/backendsam/api/DocumentoAvisoLlegada?folioAvisoLlegadaID=" + folio + "&tipoArchivoID=" + _tipoArchivo + "&token=" + Cookies.get("token"),
                        autoUpload: false,
                        withCredentials: false,
                        batch: true
                    },
                    success: function (data) {
                        HabilitarObtenerDocumentosAvisoLlegada();
                    },
                    error: function (data) { },
                    upload: onUpload
                });
                $("#files").data("kendoUpload").enable(false);
                $("#files").on('drop', function (event) {
                    event.preventDefault();
                });
                //modal transportista
                $("#ContactoID_Transportista").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "ContactoID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarContacto(dataItem.ContactoID, dataItem.Nombre);
                    },
                    filter: "contains",
                });
                ObtenerContacto();

                //modal Camion
                $("#CamionID_Plana").kendoComboBox({
                    dataTextField: "Placas",
                    dataValueField: "VehiculoID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarCamion(dataItem.VehiculoID, dataItem.Placas);
                    },
                    filter: "contains",
                });
                ObtenerCamion();

                $("#TipoVehiculo_Plana").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "TipoVehiculoID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarTipoVehiculoPlana(dataItem.TipoVehiculoID, dataItem.Nombre);
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            TipoVehiculoPlana = [];
                        };
                    },
                    filter: "contains",
                });
                ObtenerTipoVehiculoPlana();

                $("#TipoVehiculo_Camion").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "TipoVehiculoID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarTipoVehiculoTracto(dataItem.TipoVehiculoID, dataItem.Nombre);
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            TipoVehiculoTracto = [];
                        };
                    },
                    filter: "contains",
                });
                ObtenerTipoVehiculoTracto();

                //Camion
                $("#Tracto").kendoComboBox({
                    dataTextField: "Placas",
                    dataValueField: "VehiculoID",
                    select: function (e) {

                        var dataItem = this.dataItem(e.item.index());
                        if (dataItem.VehiculoID == 0) {
                            VentanaModal(6);
                            e.preventDefault();
                            var combobox = $("#TipoVehiculo_Camion").data("kendoComboBox");
                            combobox.select(function (dataItem) {
                                if (dataItem.Nombre == "Tracto") {
                                    CargarTipoVehiculoTracto(dataItem.TipoVehiculoID, dataItem.Nombre);
                                    return dataItem.Nombre === "Tracto";
                                }
                            });

                        }

                        CargarCamionEntradaMaterial(dataItem.VehiculoID, dataItem.Placas);
                    },
                    change: function (e) {
                        var value = this.value();
                        if (!value) {
                            CamionEntradaMaterial = [];
                        };
                    },
                    filter: "contains",
                });
                ObtenerCamionEntradaMaterial();

                $("#TransportistaID_Camion").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "TransportistaID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarTransportistaCamion(dataItem.TransportistaID, dataItem.Nombre);
                    },
                    filter: "contains",
                });
                ObtenerTransportistaCamion();

                $("#ChoferID_Camion").kendoComboBox({
                    dataTextField: "Nombre",
                    dataValueField: "ChoferID",
                    //dataTextField: "Nombre",
                    //dataValueField: "ChoferID",
                    select: function (e) {
                        var dataItem = this.dataItem(e.item.index());
                        CargarChoferCamion(dataItem.ChoferID, dataItem.Nombre);

                    },
                    filter: "contains",
                });
                ObtenerChoferCamion();
                ObtenerFechaDefault();
            };
        
            function onUploadArchivoPaseSalida() {

            };

            function onUploadArchivoAutorizar() {
                if (!$("#NumeroPermiso").val()) {
                    displayMessage("notificationslabel0011", "", '1');
                    e.preventDefault();
                }

            };

            function onUpload(e) {
                if (!$("#TipoArchivo").data("kendoComboBox").value()) {
                    displayMessage("notificationslabel0012", "", '1');
                    e.preventDefault();
                }
                $("#files").data("kendoUpload").options.async.saveUrl = "http://localhost:60960/backendsam/api/DocumentoAvisoLlegada?folioAvisoLlegadaID=" + folio + "&tipoArchivoID=" + _tipoArchivo + "&token=" + Cookies.get("token");
                //if (folio == -1) {
                //    alert("Favor de guardar el aviso de llegada antes de subir archivos");
                //    e.preventDefault();
                //};
            };

            function GuardarAvisoLlegada()
            {
                //Arreglo Aviso de llegada
                AvisoLlegada = [];
                AvisoLlegada[0] = { FolioAvisoLlegadaID: "", Proyectos: "", Transportista: "", FechaRecepcion: "", Plana: "", Patio: "", Chofer: "", Archivos: "", PermisoAduana: "", Tracto: "", Cliente: "", TipoAviso: "", PaseSalidaEnviado: "" };
                
                _permisoAduana = [];
                _permisoAduana[0] = { PermisoAutorizado: "", PermisoTramite: "", NumeroPermiso:"", ArchivoAutorizado: "" };

                _archivosPackingList = [];
                _archivosPackingList[0] = { PaseSalidaEnviado: "", Archivos: "" };

                //objeto para los proyectos y documentos.
                ProyectoIDs = [];
                PlanaIDs = [];
                Documentos = [];                
                permiso = [];
                DocumentosPackingList = [];


                _permisoAduana[0].NumeroPermiso = "";
                _permisoAduana[0].PermisoAutorizado = false;
                _permisoAduana[0].PermisoTramite = $("#hdPermisoTramite").val();

                var proyectos = $("#ProyectoID").data("kendoMultiSelect").value();
                $.each(proyectos, function (index, value) {
                    ProyectoIDs[index] = { ProyectoID: value };
                });

                var planas = $("#PlanaID").data("kendoMultiSelect").value();
                $.each(planas, function (index, value) {
                    PlanaIDs[index] = { PlanaID: value };
                });

                $('#listaArchivos > tbody  > tr').each(function (index, value) {
                    if ($(this).find("td:first").length > 0) {
                        var id = $(this).attr("id").split(",")[0];
                        var archivo = $(this).find("td a").eq(0).html();
                        var tipoArchivo = $(this).find("td").eq(1).html();
                        var extencion = $(this).attr("id").split(",")[1];

                        Documentos[index] = { ArchivoID: id, Nombre: archivo, Extension: extencion, TipoArchivo: tipoArchivo };

                        //item = {};
                        //item["ArchivoID"] = id;
                        //item["Nombre"] = archivo;
                        //item["Extension"] = extencion;
                        //item["TipoArchivo"] = tipoArchivo;
                        //Documentos.push(item);
                    };
                });

                CargarDefaults();

                var d = new Date($("#FechaRecepcion").data("kendoDatePicker").value());
                var curr_date = d.getDate();
                var curr_month = d.getMonth() + 1; //Months are zero based
                var curr_year = d.getFullYear();

                AvisoLlegada[0].FolioAvisoLlegadaID = folio != -1 ? folio : -1;
                AvisoLlegada[0].Proyectos = ProyectoIDs;
                AvisoLlegada[0].Transportista = Transportista;
                AvisoLlegada[0].FechaRecepcion = curr_year + "-" + curr_month + "-" + curr_date;
                AvisoLlegada[0].Plana = PlanaIDs;
                AvisoLlegada[0].Patio = Patio;
                AvisoLlegada[0].Chofer = Chofer;
                AvisoLlegada[0].Archivos = Documentos;
                AvisoLlegada[0].Tracto = CamionEntradaMaterial;
                AvisoLlegada[0].Cliente = Cliente;
                AvisoLlegada[0].TipoAviso = TipoAvisos;
                console.log("TipoAvisoID= " + TipoAvisos.TipoAvisoID + ", Nombre= " + TipoAvisos.Nombre);
                loadingStart();

                if (folio != -1)//Edición
                {
                    BotonEdicion();
                    $AvisoLlegada.AvisoLlegada.update(AvisoLlegada[0], { token: $.cookie("token") }).done(function (data) {
                        console.log("Client.DummyAvisoLlegada.update");
                        Error(data);
                        loadingStop();
                        BotonAlta();
                    });
                } else //Alta
                {
                    $AvisoLlegada.AvisoLlegada.create(AvisoLlegada[0], { token: $.cookie("token") }).done(function (data) {
                        console.log("Client.DummyAvisoLlegada.create");

                        if (Error(data))
                        {
                            folio = data.ReturnMessage[1];
                            cargarTituloFolio();
                            BotonAlta();
                            displayMessage("notificationslabel0013", folio, '0');
                            $("#DetalleAvisoLlegada0084").show();
                        }

                        loadingStop();
                    });
                }
            };

            function CargarDefaults() {
                $("#formAvisoLlegada :not(.security_required)").each(function (i, elem) {
                    if (elem.tagName.toLowerCase() != 'label') {
                        switch ($(elem).attr("id")) {
                            case 'TipoAvisoID':
                                if (!$("#TipoAvisoID").data("kendoComboBox").value()) {
                                    CargarTipoAviso(1, "");
                                }
                                break;
                            case 'ClienteID':
                                if (!$("#ClienteID").data("kendoComboBox").value().length > 0) {
                                    CargarCliente(1, "");
                                }
                                break;
                            case 'PatioID':
                                if (!$("#PatioID").data("kendoComboBox").value() > 0) {
                                    CargarPatio(1, "");
                                }
                                break;
                            case 'ChoferID':
                                if (!$("#ChoferID").data("kendoComboBox").value() > 0) {
                                    CargarChofer(1, "");
                                }
                                break;
                            case 'Tracto':
                                if (!$("#Tracto").data("kendoComboBox").value() > 0) {
                                    CargarCamionEntradaMaterial(1, "");
                                }
                                break;
                            case 'TransportistaID':
                                if (!$("#TransportistaID").data("kendoComboBox").value() > 0) {
                                    CargarTransportista(1, "");
                                }
                                break;
                        };
                    };
                });
            };
            function BotonEdicion() {
                $("#dropdown-toggle").show();
                $("#Editar").css("display", "none");
                $("#Guardar").css("display", "block");
                habilitarControles();
            };

            function BotonAlta() {
                $("#dropdown-toggle").hide();
                $("#Editar").css("display", "block");
                $("#Guardar").css("display", "none");
                deshabilitarControles();
            };

            function habilitarControles() {
                $("#TipoAvisoID").data("kendoComboBox").enable();
                $("#ClienteID").data("kendoComboBox").enable();
                $("#PatioID").data("kendoComboBox").enable();
                $("#TransportistaID").data("kendoComboBox").enable();
                $("#ChoferID").data("kendoComboBox").enable();
                $("#Tracto").data("kendoComboBox").enable();
                $("#TipoArchivo").data("kendoComboBox").enable();

                $("#ProyectoID").data("kendoMultiSelect").enable();
                $("#PlanaID").data("kendoMultiSelect").enable();

                $("#FechaRecepcion").data("kendoDatePicker").enable();
                $("#files").data("kendoUpload").enable();

                if ($("#hdPermisoTramite").val() == "1") {
                    $("#TramitarPermiso").attr('disabled', 'disabled');
                };
                HabilitarObtenerDocumentosAvisoLlegada();
            };

            function deshabilitarControles() {
                $("#TipoAvisoID").data("kendoComboBox").enable(false);
                $("#ClienteID").data("kendoComboBox").enable(false);
                $("#PatioID").data("kendoComboBox").enable(false);
                $("#TransportistaID").data("kendoComboBox").enable(false);
                $("#ChoferID").data("kendoComboBox").enable(false);
                $("#Tracto").data("kendoComboBox").enable(false);
                $("#TipoArchivo").data("kendoComboBox").enable(false);

                $("#ProyectoID").data("kendoMultiSelect").enable(false);
                $("#PlanaID").data("kendoMultiSelect").enable(false);

                $("#FechaRecepcion").data("kendoDatePicker").enable(false);
                $("#files").data("kendoUpload").enable(false);
                $("#files").on('drop', function (event) {
                    event.preventDefault();
                });
                
                $("#TramitarPermiso").attr('disabled', 'disabled');
                
                DesahabilitarObtenerDocumentosAvisoLlegada();
            };

            function borrarArchivo(id,fila) {
                $DocumentoAvisoLlegada.DocumentoAvisoLlegada.destroy({}, { documentoID: id, token: Cookies.get("token") }).done(function (data) {
                    fila.closest("tr").remove();
                    console.log("Client.DocumentoAvisoLlegada.destroy");
                });
            };

            function cargarTituloFolio() {
                $("#divFolio").removeClass("hidden");
                $("#spanFolio").html(folio);
            };

            function CargaInicialEdicion(id) {
                cargarTituloFolio();
                BotonAlta();
                $AvisoLlegada.AvisoLlegada.read({}, { avisollegadaID: id, token: Cookies.get("token") }).done(function (data) {
                    console.log(data);
                    var concat = "";
                    var concatPlanas = "";

                    Error(data);

                    $("#TramitarPermiso").removeAttr('disabled');

                    $.each(data.Proyectos, function (index, value) {
                        concat += "," + value.ProyectoID;
                        console.log(" concat:" + concat);
                    });

                    $("#ProyectoID").data("kendoMultiSelect").value(concat.split(","));

                    //Se carga el arreglo transportista
                    if(data.Transportista.length > 0){
                        CargarTransportista(data.Transportista[0].TransportistaID, data.Transportista[0].Nombre);
                        $("#TransportistaID").data("kendoComboBox").value(data.Transportista[0].Nombre);
                        ObtenerChofer(data.Transportista[0].TransportistaID);
                    }

                    if (data.Cliente) {
                        CargarCliente(data.Cliente.ClienteID, data.Cliente.Nombre);
                        $("#ClienteID").data("kendoComboBox").value(data.Cliente.Nombre);
                    }

                    if (data.TipoAviso) {
                        CargarTipoAviso(data.TipoAviso.TipoAvisoID, data.TipoAviso.Nombre);
                        $("#TipoAvisoID").data("kendoComboBox").value(data.TipoAviso.Nombre);
                    }

                    var splitYear = data.FechaRecepcion.split("-")[0];
                    var splitMonth = data.FechaRecepcion.split("-")[1];
                    var splitDay = data.FechaRecepcion.split("-")[2];

                    //Fecha Recepcion
                    var FechaRecepcion = new Date(splitYear, splitMonth - 1, splitDay);
                    var curr_date = FechaRecepcion.getDate();
                    var curr_month = FechaRecepcion.getMonth() + 1; //Months are zero based
                    var curr_year = FechaRecepcion.getFullYear();

                    if ($("#language").data("kendoDropDownList").value() == "es-MX") {
                        format = "dd/MM/yyyy";
                    } else {
                        format = "MM/dd/yyyy";
                    };

                    var fecha = new Date(curr_year, curr_month - 1, curr_date);
                    var fechakendo = kendo.parseDate(fecha, format);
                    $("#FechaRecepcion").data("kendoDatePicker").value(fechakendo);

                    if (data.Estatus == "Autorizado") {
                        ocultarStatus();
                        $("#DetalleAvisoLlegada0085").show();
                    };

                    if (data.Estatus == "Generado") {
                        ocultarStatus();
                        $("#DetalleAvisoLlegada0084").show();
                    };

                    if (data.Estatus == "Creado") {
                        ocultarStatus();
                        $("#DetalleAvisoLlegada0088").show();
                    };
                    $.each(data.Plana, function (index, value) {
                        concatPlanas += "," + value.PlanaID;
                        console.log(" concatPlanas:" + concatPlanas);
                    });
                    $("#PlanaID").data("kendoMultiSelect").value(concatPlanas.split(","));

                    //Se carga el arreglo Patio
                    if(data.Patio.length > 0) {
                        CargarPatio(data.Patio[0].PatioID, data.Patio[0].Nombre);
                        $("#PatioID").data("kendoComboBox").value(data.Patio[0].Nombre);
                        if (!data.Patio[0].RequierePermisoAduana) {
                            $("#TramitarPermiso").attr('disabled', 'disabled');
                        };
                    }

                    //Se carga el arreglo Chofer
                    if (data.Chofer.length > 0) {
                        CargarChofer(data.Chofer[0].ChoferID, data.Chofer[0].Nombre);
                        $("#ChoferID").data("kendoComboBox").value(data.Chofer[0].Nombre);
                    }

                    if (data.Tracto) {
                        CargarCamionEntradaMaterial(data.Tracto.VehiculoID, data.Tracto.Placas);
                        $("#Tracto").data("kendoComboBox").value(data.Tracto.Placas);
                    }

                    $("#listaArchivos tbody").empty();
                    $.each(data.Archivos, function (index, value) {
                        $("#listaArchivos tbody").append("<tr id='" + value.ArchivoID + "," + value.Extension + "'><td><a href='" + value.Url + "'>" + value.Nombre + "</a></td><td>" + value.TipoArchivo + "</td><td><a href='#' >" + "<span class='delete disable'></span>" + "</a></td></tr>");
                    });

                    //Permiso Aduana
                    if (data.PermisoAduana.length > 0) {
                        if (data.PermisoAduana[0].PermisoTramite) {
                            $("#TramitarPermiso").attr('disabled', 'disabled');
                            $("#hdPermisoTramite").val(1);
                        }
                    };
                });
            };

            function CargarTransportista(id, value) {
                Transportista = [];
                _transportista = {};
                _transportista["TransportistaID"] = id;
                _transportista["Nombre"] = value;
                Transportista.push(_transportista);
            };

            function CargarTransportistaCamion(id, value) {
                TransportistaCamion = [];
                _transportista = {};
                _transportista["TransportistaID"] = id;
                _transportista["Nombre"] = value;
                TransportistaCamion.push(_transportista);
            };

            function CargarPatio(id, value) {
                Patio = [];
                _patio = {};
                _patio["PatioID"] = id;
                _patio["Nombre"] = value;
                Patio.push(_patio);
            };

            function CargarProveedor(id, value) {
                Proveedor = [];
                _proveedor = {};
                _proveedor["ProveedorID"] = id;
                _proveedor["Nombre"] = value;
                Proveedor.push(_proveedor);
            };

            function CargarChofer(id, value) {
                Chofer = [];
                _chofer = {};
                _chofer["ChoferID"] = id;
                _chofer["Nombre"] = value;
                Chofer.push(_chofer);
            };

            function CargarChoferCamion(id, value) {
                ChoferCamion = [];
                _chofer = {};
                _chofer["ChoferID"] = id;
                _chofer["Nombre"] = value;
                ChoferCamion.push(_chofer);
            };

            function CargarContacto(id, value) {
                Contacto = [];
                _contacto = {};
                _contacto["ContactoID"] = id;
                _contacto["Nombre"] = value;
                Contacto.push(_contacto);
            };
        
            function CargarCamion(id, value) {
                Camion = [];
                _camion = {};
                _camion["CamionID"] = id;
                _camion["Placas"] = value;
                Camion.push(_camion);
            };

            function CargarTipoVehiculoTracto(id, value) {
                TipoVehiculoTracto = [];
                _tipovehiculo = {};
                _tipovehiculo["TipoVehiculoID"] = id;
                _tipovehiculo["Nombre"] = value;
                TipoVehiculoTracto.push(_tipovehiculo);
            };

            function CargarTipoVehiculoPlana(id, value) {
                TipoVehiculoPlana = [];
                _tipovehiculo = {};
                _tipovehiculo["TipoVehiculoID"] = id;
                _tipovehiculo["Nombre"] = value;
                TipoVehiculoPlana.push(_tipovehiculo);
            };
        
            function CargarCliente(id, value) {
                Cliente = {};
                Cliente = { ClienteID: id, Nombre: value };
            };

            function CargarTipoAviso(id, value) {
                TipoAvisos = {};
                TipoAvisos = { TipoAvisoID: id, Nombre: value };
            };
            
            function CargarCamionEntradaMaterial(id, value) {
                CamionEntradaMaterial = {};
                CamionEntradaMaterial = { VehiculoID: id, Placas: value };
            };

            function CargarTipoArchivo(id, value) {
                TipoArchivo = {};
                TipoArchivo = {TipoArchivoID: id, Nombre: value};
            };

            function VentanaModal(id) {
            
                var modalTitle = "";

                switch (id) {
                    case 1:
                        $("#modalProveedor").hide();
                        $("#modalPatio").hide();
                        $("#modalChofer").hide();
                        $("#modalPlana").hide();
                        $("#modalCamion").hide();
                        $("#modalTransportista").show();
                        modalTitle = "Transportista";
                        break;
                    case 2:
                        $("#modalTransportista").hide();
                        $("#modalPatio").hide();
                        $("#modalChofer").hide();
                        $("#modalPlana").hide();
                        $("#modalCamion").hide();
                        $("#modalProveedor").show();
                        modalTitle = "Proveedor";
                        break;
                    case 3:
                        $("#modalTransportista").hide();
                        $("#modalPatio").hide();
                        $("#modalChofer").hide();
                        $("#modalProveedor").hide();
                        $("#modalCamion").hide();
                        $("#modalPlana").show();
                        modalTitle = "Plana";
                        break;
                    case 4:
                        $("#modalTransportista").hide();
                        $("#modalProveedor").hide();
                        $("#modalChofer").hide();
                        $("#modalPlana").hide();
                        $("#modalCamion").hide();
                        $("#modalPatio").show();
                        modalTitle = "Patio";
                        break;
                    case 5:
                        $("#modalTransportista").hide();
                        $("#modalProveedor").hide();
                        $("#modalPatio").hide();
                        $("#modalPlana").hide();
                        $("#modalCamion").hide();
                        $("#modalChofer").show();
                        modalTitle = "Chofer";
                        break;
                    case 6:
                        $("#modalTransportista").hide();
                        $("#modalProveedor").hide();
                        $("#modalPatio").hide();
                        $("#modalPlana").hide();
                        $("#modalChofer").hide();
                        $("#modalCamion").show();
                        modalTitle = "Tracto";
                        break;
                };
            
                var window = $("#window");
                var win = window.kendoWindow({
                    actions: false,
                    modal: true,
                    title: modalTitle,
                    resizable: false,
                    visible: false,
                    width: "32.6%",
                    minWidth: 660,
                    position: {
                        top: "10%",
                        left: "20%"
                    }
                }).data("kendoWindow");
                window.data("kendoWindow").title(modalTitle);
                window.data("kendoWindow").center().open();
            };
            

            function GuardarTransportista() {

                TransportistaModal = [];
                TransportistaModal[0] = { ContactoID: "", Nombre: "", Descripcion: "", Direccion: "", Telefono: "" };
                TransportistaModal[0].ContactoID = Contacto[0].ContactoID;
                TransportistaModal[0].Nombre = $("#Nombre_Transportista").val();
                TransportistaModal[0].Descripcion = $("#Descripcion_Transportista").val();
                TransportistaModal[0].Direccion = $("#Direccion_Transportista").val();
                TransportistaModal[0].Telefono = $("#Telefono_Transportista").val();

                console.log(TransportistaModal[0]);

                $Transportista.Transportista.create(TransportistaModal[0], { token: Cookies.get("token") }).done(function (data) {
                    LimpiarModalTransportista();
                    if (Error(data)) {
                        $("#window").data("kendoWindow").close();
                        ObtenerTransportista();
                    };
                });
            };
       
            //function GuardarProveedor() {
            //    ProveedorModal = [];
            //    ProveedorModal[0] = { ContactoID: "", Nombre: "", Descripcion: "", Direccion: "", Telefono: "" };
            //    ProveedorModal[0].ContactoID = Contacto[0].ContactoID;
            //    ProveedorModal[0].Nombre = $("#Nombre_Proveedor").val();
            //    ProveedorModal[0].Descripcion = $("#Descripcion_Proveedor").val();
            //    ProveedorModal[0].Direccion = $("#Direccion_Proveedor").val();
            //    ProveedorModal[0].Telefono = $("#Telefono_Proveedor").val();

            //    console.log(ProveedorModal[0]);

            //    $Proveedor.Proveedor.create(ProveedorModal[0], { token: Cookies.get("token") }).done(function (data) {
            //        LimpiarModalProveedor();
            //        $("#window").data("kendoWindow").close();
            //        ObtenerProveedor();
            //    });
            //};

            function GuardarPatio() {
                PatioModal = [];
                PatioModal[0] = { Nombre: "", Propietario: "", Descripcion: "", RequierePermisoAduana: "" };
                PatioModal[0].Nombre = $("#Nombre_Patio").val();
                PatioModal[0].Propietario = $("#Propietario_Patio").val();
                PatioModal[0].Descripcion = $("#Descripcion_Patio").val();
                PatioModal[0].RequierePermisoAduana = $("#RequierePermisoAduana_Patio").is(":checked");

                console.log(PatioModal[0]);

                $Patio.Patio.create(PatioModal[0], { token: Cookies.get("token") }).done(function (data) {
                    LimpiarModalPatio();
                    if (Error(data)) {
                        $("#window").data("kendoWindow").close();
                        ObtenerPatio();
                    };
                });
            };

            function GuardarChofer() {
                ChoferModal = [];
                ChoferModal[0] = { Nombre: "" };
                ChoferModal[0].Nombre = $("#Nombre_Chofer").val();

                console.log(ChoferModal[0]);

                $Chofer.Chofer.create(ChoferModal[0], { token: Cookies.get("token") }).done(function (data) {
                    console.log("Client.DummyChofer.create");
                    LimpiarModalChofer();
                    if (Error(data)) {
                        ObtenerChofer();
                        $("#window").data("kendoWindow").close();
                    }
                });
            };

            function GuardarPlana() {
                var camionid = Camion.length > 0 ? Camion[0].CamionID : "-1";
                PlanaModal = [];
                PlanaModal[0] = { TipoVehiculoID: "", Placas: "", TarjetaCirculacion: "", PolizaSeguro: "", Unidad: "", Modelo: "", VehiculoID: "", ChoferID: "", TransPortistaID: "", TractoID: "" };

                PlanaModal[0].TipoVehiculoID = TipoVehiculoPlana.length > 0 ? TipoVehiculoPlana[0].TipoVehiculoID : "-1";
                PlanaModal[0].Placas = $("#Placas_Plana").val();
                PlanaModal[0].TarjetaCirculacion = "";
                PlanaModal[0].PolizaSeguro = "";
                PlanaModal[0].Unidad = $("#Unidad_Plana").val();
                PlanaModal[0].Modelo = $("#Modelo_Plana").val();
                PlanaModal[0].VehiculoID = "";
                PlanaModal[0].ChoferID = "";
                PlanaModal[0].TransPortistaID = "";
                PlanaModal[0].TractoID = camionid;
                console.log("camionid: " + camionid);

                $Plana.Plana.create(PlanaModal[0], { token: Cookies.get("token") }).done(function (data) {
                    LimpiarModalPlana();
                    if (Error(data)) {
                        ObtenerPlanas();
                        $("#window").data("kendoWindow").close();
                    } 
                });
            };

            function GuardarCamion() {
                var transportistaID = TransportistaCamion.length > 0 ? TransportistaCamion[0].TransportistaID : "-1";
                var choferid = ChoferCamion.length > 0 ? ChoferCamion[0].ChoferID : "-1";

                CamionModal = [];
                CamionModal[0] = { TipoVehiculoID: "", Placas: "", TarjetaCirculacion: "", PolizaSeguro: "", Unidad: "", Modelo: "", VehiculoID: "", ChoferID: "", TransportistaID: "", TractoID: "" };

                CamionModal[0].TipoVehiculoID = TipoVehiculoTracto.length > 0 ? TipoVehiculoTracto[0].TipoVehiculoID : "-1";
                CamionModal[0].Placas = $("#Placas_Camion").val();
                CamionModal[0].TarjetaCirculacion = $("#TarjetaCirculacion_Camion").val();
                CamionModal[0].PolizaSeguro = $("#PolizaSeguro").val();
                CamionModal[0].Unidad = $("#Unidad_Camion").val();
                CamionModal[0].Modelo = $("#Modelo_Camion").val();
                CamionModal[0].VehiculoID = "";
                CamionModal[0].ChoferID = choferid;
                CamionModal[0].TransportistaID = transportistaID;
                CamionModal[0].TractoID = "";

                $Camion.Tracto.create(CamionModal[0], { token: Cookies.get("token") }).done(function (data) {
                    console.log("Client.Camion.create");
                    LimpiarModalCamion();
                    if (Error(data)) {
                        $("#window").data("kendoWindow").close();
                        ObtenerCamionEntradaMaterial();
                    };
                });
            };

            function CancelarTransportista() {
                LimpiarModalTransportista();
                cerrarVentanaModal();
            };

            //function CancelarProveedor() {
            //    cerrarVentanaModal();
            //};

            function CancelarPatio() {
                LimpiarModalPatio();
                cerrarVentanaModal();
            };

            function CancelarChofer() {
                LimpiarModalChofer();
                cerrarVentanaModal();
            };

            function CancelarPlana() {
                LimpiarModalPlana();
                cerrarVentanaModal();
            };

            function CancelarCamion() {
                LimpiarModalCamion();
                cerrarVentanaModal();
            };

            function cerrarVentanaModal() {
                $("#window").data("kendoWindow").close();
            };

            function LimpiarModalTransportista() {
                $("#ContactoID_Transportista").data("kendoComboBox").value("");
                $("#Nombre_Transportista").val("");
                $("#Descripcion_Transportista").val("");
                $("#Direccion_Transportista").val("");
                $("#Telefono_Transportista").val("");
                Contacto = [];
            };

            function LimpiarModalProveedor() {
                //$("#ContactoID_Proveedor").data("kendoComboBox").value("");
                $("#Nombre_Proveedor").val("");
                $("#Descripcion_Proveedor").val("");
                $("#Direccion_Proveedor").val("");
                $("#Telefono_Proveedor").val("");
                Contacto = [];
            };

            function LimpiarModalPatio() {
                $("#Nombre_Patio").val("");
                $("#Propietario_Patio").val("");
                $("#Descripcion_Patio").val("");
                $("#RequierePermisoAduana_Patio").attr("checked", false);
            };

            function LimpiarModalChofer() {
                $("#Nombre_Chofer").val();
            };

            function LimpiarModalPlana() {
                $("#CamionID_Plana").data("kendoComboBox").value("");
                $("#Placas_Plana").val("");
                $("#Unidad_Plana").val("");
                $("#Modelo_Plana").val("");
                Camion = [];
                TipoVehiculoPlana = [];
            };

            function LimpiarModalCamion() {
                $("#TransportistaID_Camion").data("kendoComboBox").value("");
                $("#ChoferID_Camion").data("kendoComboBox").value("");
                $("#Placas_Camion").val("");
                $("#TarjetaCirculacion_Camion").val("");
                $("#PolizaSeguro").val("");
                $("#Unidad_Camion").val("");
                $("#Modelo_Camion").val("");
                TransportistaCamion = [];
                ChoferCamion = [];
                TipoVehiculoTracto = [];
            };

            function GenerarPermiso() {
                if (folio == -1) {
                    displayMessage("notificationslabel0014", "", '1');
                    return;
                };

                loadingStart();
                $PermisoTramite.PermisoAduana.read({}, { folio: folio, token: Cookies.get("token") }).done(function (result) {
                    console.log("$PermisoTramite.PermisoAduana.read");
                    loadingStop();
                    Error(result);
                    $("#hdPermisoTramite").val(1);//Permiso en tramite
                    $("#TramitarPermiso").attr("disabled", "disabled");
                    
                });
            };

            function ObtenerFechaDefault() {
                var today = new Date();
                var curr_date = today.getDate();
                var curr_month = today.getMonth() + 1; //Months are zero based
                var curr_year = today.getFullYear();

                if ($("#language").data("kendoDropDownList").value() == "es-MX") {
                    format = "dd/MM/yyyy";
                } else {
                    format = "MM/dd/yyyy";
                };

                var fecha = new Date(curr_year, curr_month - 1, curr_date);
                var fechakendo = kendo.parseDate(fecha, format);

                $("#FechaRecepcion").data("kendoDatePicker").value(fechakendo);
            };

            function ObtenerProyectos() {
                $Proyecto.Proyecto.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#ProyectoID").data("kendoMultiSelect").dataSource.data(result);
                });
            };

            function ObtenerPlanas() {
                $Plana.Plana.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#PlanaID").data("kendoMultiSelect").dataSource.data(result);
                });
            };

            function ObtenerTransportista() {
                $Transportista.Transportista.read({ esAvisoEntrada: 1, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#TransportistaID").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerPatio() {
                $Patio.Patio.read({ esAvisoEntrada: 1, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#PatioID").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerProveedor() {
                $Proveedor.Proveedor.read({ esAvisoEntrada: 1, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#ProveedorID").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerChofer(transportistaID) {
                $folioEntradaMaterial.Listado.read({ tipoListado: 3, token: Cookies.get("token"), parametroBusqueda: transportistaID }).done(function (result) {
                    Error(result);
                    if (result.length > 0) {
                        $("#ChoferID").data("kendoComboBox").dataSource.data(result);
                    } else {
                        Chofer = [];
                        $("#ChoferID").data("kendoComboBox").value("");
                        $("#ChoferID").data("kendoComboBox").dataSource.data([]);
                    }
                    
                });
            };

            
            function ObtenerChoferCamion() {
                $Chofer.Chofer.read({ esAvisoEntrada: 0, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#ChoferID_Camion").data("kendoComboBox").dataSource.data(result);
                });
            };
        
            function ObtenerCamion() {
                $Camion.Tracto.read({ esAvisoEntrada: 0, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#CamionID_Plana").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerTipoVehiculoPlana() {
                $TipoVehiculo.TipoVehiculo.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#TipoVehiculo_Plana").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerTipoVehiculoTracto() {
                $TipoVehiculo.TipoVehiculo.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#TipoVehiculo_Camion").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerCamionEntradaMaterial() {
                $Camion.Tracto.read({ esAvisoEntrada: 1, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#Tracto").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerCliente() {
                $Cliente.Cliente.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#ClienteID").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerTipoAviso() {
                $TipoAviso.TipoAviso.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#TipoAvisoID").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerContacto() {
                $Contacto.Contacto.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#ContactoID_Transportista").data("kendoComboBox").dataSource.data(result);
                    //$("#ContactoID_Proveedor").data("kendoComboBox").dataSource.data(result);
                });

            };
            function ObtenerTransportistaCamion() {
                $Transportista.Transportista.read({ esAvisoEntrada: 0, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#TransportistaID_Camion").data("kendoComboBox").dataSource.data(result);
                });
            };
            
            function ObtenerTipoArchivo() {
                $TipoArchivo.TipoArchivo.read({ token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    $("#TipoArchivo").data("kendoComboBox").dataSource.data(result);
                });
            };

            function ObtenerPatioRequierePermiso() {
                var patioid = Patio.length > 0 ? Patio[0].PatioID : 0;

                $Patio.Patio.read({ patioID: patioid, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    if (result) {
                        $("#TramitarPermiso").removeAttr('disabled');
                    } else {
                        $("#TramitarPermiso").attr('disabled', 'disabled');
                    };
                });
            }

            function cancelarFolio() {
                if (folio == -1) {
                    displayMessage("notificationslabel0015", "", '1');
                    return;
                };

                loadingStart();
                $AvisoLlegada.AvisoLlegada.destroy({}, { folio: folio, token: Cookies.get("token") }).done(function (result) {
                    Error(result);
                    loadingStop();
                    ocultarStatus();
                    $("#DetalleAvisoLlegada0086").show();
                });
            };

            function ocultarStatus() {
                $("#DetalleAvisoLlegada0084").hide();
                $("#DetalleAvisoLlegada0085").hide();
                $("#DetalleAvisoLlegada0086").hide();
                $("#DetalleAvisoLlegada0088").hide();
            };

            function DesahabilitarObtenerDocumentosAvisoLlegada() {
                $DocumentoAvisoLlegada.DocumentoAvisoLlegada.read({ folio: folio, token: Cookies.get("token") }).done(function (result) {
                    loadingStart();
                    if (Error(result)) {
                        if (result.length > 0) {
                            $("#listaArchivos tbody").empty();
                            $.each(result, function (index, value) {
                                $("#listaArchivos tbody").append("<tr id='" + value.DocumentoID + "," + value.Extencion + "'><td><a target='_blank' href='" + value.Url + "'>" + value.Nombre + "</a></td><td>" + value.TipoArchivo + "</td><td><a href='#' >" + "<span class='delete disable'></span>" + "</a></td></tr>");
                            });
                        }
                    };
                    loadingStop();
                });
            };

            function HabilitarObtenerDocumentosAvisoLlegada() {
                $DocumentoAvisoLlegada.DocumentoAvisoLlegada.read({ folio: folio, token: Cookies.get("token") }).done(function (result) {
                    loadingStart();
                    if (Error(result)) {
                        if (result.length > 0) {
                            $("#listaArchivos tbody").empty();
                            $.each(result, function (index, value) {
                                $("#listaArchivos tbody").append("<tr id='" + value.DocumentoID + "," + value.Extencion + "'><td><a target='_blank' href='" + value.Url + "' >" + value.Nombre + "</a></td><td>" + value.TipoArchivo + "</td><td><a href='#' onclick='borrarArchivo(" + value.DocumentoID + ",$(this));' >" + "<span class='delete'></span>" + "</a></td></tr>");
                            });
                        }
                    };
                    loadingStop();
                });
            };

            function DescargarArchivo(a) {
                window.open(a.innerHTML);
            };

            function Error(data) {
                if (data.ReturnCode) {
                    if (data.ReturnCode != 200) {
                        if (data.ReturnCode == 401) {
                            removeUserSession();
                            return true;
                        } else {
                            displayMessage("notificationslabel0008", data.ReturnMessage, '2');
                            return false;
                        }
                    } else {
                        return true;
                    }
                } else {
                    return true;
                }
            };
            }

            @section JavascriptDocumentReadyFunctions {
            //Your partial view document ready function
            CargaInicial();

            if (folio != -1)
            {
                CargaInicialEdicion(folio);
            }


            $authorizationModel["Permiso Aduana"] = $PermisoAduanaModel;
            $authorizationModel["Aviso Entrada"] = $AvisoLLegadaModel;
            $authorizationModel["Patio"] = $PatioModel;
            $authorizationModel["Transportista"] = $TransportistaModel;
            $authorizationModel["Chofer"] = $ChoferModel;
            $authorizationModel["Tracto"] = $TractoModel;
            $authorizationModel["Plana"] = $PlanaModel;
            
    }

    @section JavascriptDocumentReadyHomeCookie {
    Cookies.set("home", true, { path: '/' });
    Cookies.set("navegacion", "4", { path: '/' });
    }
</script>
