<!DOCTYPE html>
@{
}

<html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>@ViewBag.Title</title>

    <!-- Styles -->
    @Styles.Render("~/Content/bootstrap.css")
    @Styles.Render("~/Content/kendo/2014.2.716/kendo.common.min.css")
    @Styles.Render("~/Content/kendo/2014.2.716/kendo.default.min.css")
    @Styles.Render("~/Content/kendo/2014.2.716/kendo.dataviz.min.css")
    @Styles.Render("~/Content/kendo/2014.2.716/kendo.dataviz.default.min.css")
    @Styles.Render("~/Content/Styles/site.css")
    @Styles.Render("~/Content/Styles/entities.css")
    @Styles.Render("~/Content/Styles/overrides.css")


    <!-- Scripts -->
    @Scripts.Render("~/Scripts/xdomain.js")
    @Scripts.Render("~/Scripts/jquery-2.1.4.js")
    @Scripts.Render("~/Scripts/jquery.validate.js")
    @Scripts.Render("~/Scripts/jquery.rest.js")
    @Scripts.Render("~/Scripts/js.cookie.js")
    @Scripts.Render("~/Scripts/kendo/2014.2.716/kendo.all.min.js")
    @Scripts.Render("~/Scripts/kendo/2014.2.716/cultures/kendo.culture.es-MX.min.js")
    @Scripts.Render("~/Scripts/bootstrap.min.js")
    @Scripts.Render("~/Scripts/JsBarcode.js")
    @Scripts.Render("~/Scripts/CODE128.js")
    @Scripts.Render("~/Scripts/CODE39.js")
    @Scripts.Render("~/Scripts/Chart.js")

    @Scripts.Render("~/Scripts/AppComponents/Core/AlertsManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/ApiManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/DictionaryManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/GridExtensionsManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/MenuManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/NotificationsManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/SecurityManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/TranslationManager.js")
    @Scripts.Render("~/Scripts/AppComponents/Core/UtilitiesManager.js")

    @RenderSection("HtmlHead", required: false)

</head>
<body>
    <header class="clearfix">
        <div class="content-wrapper clearfix">
            <div class="col-xs-12 col-sm-3 col-md-2 col-lg-2">
                <a class="logo" href="#"></a>
            </div>
            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">
                <div class="row pull-right">
                    <div class="col-lg-12 menu">
                        <div class="search-bar">
                            <div class="input-group">
                                <input id="layoutLabel0001" type="text" class="form-control" placeholder="Buscar en todo el sitio...">
                                <span class="input-group-btn">
                                    <button class="btn spyglass btn-blue" type="button"></button>
                                </span>
                            </div>
                        </div>
                        <div class="notifications">
                            <div class="dropdown">
                                <a id="notifications"  role="button" data-toggle="dropdown" data-target="#" href="#">
                                    <img src="~/Content/images/SAMC_MenuIcon_02.png" />
                                    <span class="count">8</span>
                                </a>
                                <ul class="dropdown-menu notification-menu" role="menu" aria-labelledby="notifications">
                                    <li><a href="#">Aviso de Entrada de Material</a></li>
                                    <li><a href="#" class="read">Aviso de mensaje</a></li>
                                    <li class="footer"><a href="#">Ver más</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="logged-user">
                            <div class="btn-group">
                                <a id="logged-user" href="#" class="btn dropdown-toggle" data-toggle="dropdown">
                                    <img src="/Content/images/SAMC_MenuIcon_03.png" />
                                    <span class="name" id="nameSpan">Mario A. Gónzalez</span>
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu" role="menu">
                                    <li>
                                        <a href="#">
                                            <span id="layoutLabel0002"></span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">                                            
                                            <span id="layoutLabel0003"></span>
                                        </a>
                                    </li>
                                    <li>
                                        <a id="logout" href="#">
                                            <span id="layoutLabel0004"></span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="languageSelector">
                            <input id="language" value="es-MX" />
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="content-frame clearfix">
        <!-- LEFT NAV AND RIGHT MAIN CONTENT -->
        <div class="container clearfix col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="row">
                <!-- sidebar -->
                <div id="sidebar" class="col-xs-12 col-sm-2 col-md-2 col-lg-2 sidebar">
                    <!-- main-nav -->
                    <nav class="main-nav">
                        <ul class="main-menu" id ="main-menu">
                            <!-- The main menu is generated automatically here -->
                        </ul>
                    </nav>
                    <!-- /main-nav -->

                    <div class="nav-footer">
                        <i class="icn right minify"></i>
                        <img src="~/Content/images/SAMC_SteelLogo_Web_00.png" />
                        <ul>
                            <li><a href="#"><span id="layoutLabel0015"></span></a></li>
                            <li><a href="#"><span id="layoutLabel0016"></span></a></li>
                            <li><a href="#"><span id="layoutLabel0017"></span></a></li>
                            <li><a href="#"><span id="layoutLabel0018"></span></a></li>
                        </ul>
                    </div>

                </div>
                <!-- end sidebar -->


                <!-- content-wrapper -->
                <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10 content-container topbar">                   
                    <div class="row">
                        <!-- breadcrumb-->
                        <div class="col-sm-12 col-sm-12 col-md-12 col-lg-12 breadcrumb-container">
                            <div class="row">
                                <ul class="breadcrumb">
                                    @RenderSection("breadcrumb", required: false)
                                </ul>
                            </div>
                        </div>
                        <!-- /breadcrumb-->
                        <!-- alerts -->
                        <div class="col-sm-12 col-sm-12 col-md-12 col-lg-12 alert-container">
                            <div class="message">
                                Mensaje de éxito/error/advertencia
                            </div>
                        </div>
                        <!-- alerts -->
                    </div>
                    <!-- main -->
                    <div class="row content">
                        <div class="main-content clearfix">
                            @RenderBody()
                        </div>
                        <!-- /main-content -->
                    </div>
                    <!-- /main -->
                </div>
                <!-- /content-wrapper -->
            </div>
            <!-- /row -->
        </div>
        <!-- LEFT NAV AND RIGHT MAIN CONTENT -->
        <!-- /container-frame -->
    </div>


    <div class="modal">
        <!-- Place at bottom of page -->
    </div>
    <iframe id="my_iframe" name="my_iframe" src="@Url.Action("notfound", "Errors")" style="visibility: hidden; display: none"></iframe>

    <script>
        /****************************/
        /*     Global Variables     */
        /****************************/
        var $body = $("body");
        var $homeURI = '@Url.Action("Landing", "Home")';
        var $contextMenu = {};
        var $sideMenu = {};
        var $sideMenuLayout = { 0: {}, 1: {}, 2: {}, 3: {} };
        var $authorizationModel = {};
        var redireccionAutomatica = true;
        var returnOfSecurityCheck = {
            "layout": {
                "create": false,
                "list": false,
                "detail": false,
                "destroy": false,
                "properties": {
                    "navigation": {
                        "visible": true,
                        "editable": true,
                        "required": false
                    },
                    "search": {
                        "visible": true,
                        "editable": true,
                        "required ": false
                    },
                    "notifications": {
                        "visible": true,
                        "editable": true,
                        "required ": false
                    },
                    "useroptions": {
                        "visible": true,
                        "editable": true,
                        "required ": false
                    }
                }
            },
            "login": {
                "create": false,
                "list": false,
                "detail": true,
                "destroy": false,
                "properties": {
                    "username": {
                        "visible": true,
                        "editable": true,
                        "required": true
                    },
                    "password": {
                        "visible": true,
                        "editable": true,
                        "required ": false
                    }
                }
            }
        };

        var $layoutModel = {
            listContainer: {
                create: "",
                list: "",
                detail: "",
                destroy: ""
            },
            properties: {
                navigation: {
                    visible: "#sidebar",
                    editable: "#sidebar",
                    required: "#sidebar"
                },
                search: {
                    visible: ".search-bar",
                    editable: "#layoutLabel0001",
                    required: "#layoutLabel0001"
                },
                notifications: {
                    visible: ".notifications",
                    editable: "#notifications",
                    required: "#notifications"
                },
                useroptions: {
                    visible: ".logged-user",
                    editable: "#logged-user",
                    required: "#logged-user",
                }
            }
        };

        //Partial Views Javascript Code Container
        @RenderSection("JavascriptGlobalVariables", required: false)

        //Partial Views Javascript Code Container
        @RenderSection("JavascriptGlobalFunctions", required: false)

        /****************************/
        /* Document Ready Variables */
        /****************************/

        //Document Ready Section
        $(document).ready(function () {
            //FOR DEVELOPONLY
            //autoCookies(true);
            //redireccionAutomatica = false;

            //Set cookie of homepage to false
            Cookies.set("home", false, {path: '/'});

            //Partial Views Javascript Code Container
            @RenderSection("JavascriptDocumentReadyHomeCookie", required: false)

            //Validate Logged User Credentials
            validateCredentials();


            $("#logout").click(function (event) {
                event.preventDefault();
                removeUserSession();
            });

            //Add the language parameter to all url invoked by the <a> tag
            $("a").click(function (event) {
                event.preventDefault();
                window.location.href = this.href + "?leng=" + $("#language").data("kendoDropDownList").value();
            });

            //Language dropdownlist inicialization method
            $("#language").kendoDropDownList({
                change: changeLanguage,
                dataTextField: "text",
                dataValueField: "value",
                valueTemplate: '<img src=\"../Content/images/flags/#:data.text#.png\" alt=\"#:data.text#\" class="selected-value"/>',
                template: '<img src=\"../Content/images/flags/#:data.text#.png\" alt=\"#:data.text#\" />',
                width: 24,
                dataSource: [
                    { text: "es-MX" }, { text: "en-US" }
                ]
            });

            //Hide elements for Login
            hideElements();

            //Menu Interactions Code 
            menuManagerToBeExecutedOnDocumentReady();

            //Alerts Interactions Code
            alertsManagertoBeExecutedOnDocumentReady();

            //Add layout element to the Authorization Model
            $authorizationModel.Layout = $layoutModel;

            //Partial Views Javascript Code Container
            @RenderSection("JavascriptDocumentReadyFunctions", required: false)

            //Apply Profile Security Policy
            applySecurityPolicy();

            //Set on the dropdownlist the url language and change the current language
            $("#language").data("kendoDropDownList").select(_languageOrder[getUrlParameter("leng", "es-MX")]);
            $("#language").data("kendoDropDownList").trigger("change");

            //Hide side menu for all pages except landing and home
            toggleSideMenu();

            //Set the user name to the 
            $("#nameSpan").text(decrypt(Cookies.get("user")));
        });
    </script>
</body>
</html>
