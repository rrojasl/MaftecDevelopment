@{
    ViewBag.Title = "Listado - Catálogos";
}

@section breadcrumb {
    <li>
        <a href="@Url.Action("landing", "Home")"><span id="ListadoAvisoLlegada0020"></span></a>
    </li>
    <li>
        <a href="@Url.Action("Catalogos", "ListadoCatalogos")"><span id="ListadoCatalogos0001"></span></a>
    </li>
    <li class="active">
        <a href="@Url.Action("ListadoAvisoLlegada", "AvisoLlegada")"><span id="ListadoCatalogos0002"></span></a>
    </li>
}

<div class="form-group col-xs-12 col-sm-9 col-md-6 col-lg-5">
    <select id="listaCatalogos" class="form-group col-xs-12 col-sm-9 col-md-6 col-lg-5">
        <option disabled selected="true" value="---------">--------</option>
        <option value="transportistas">Transportistas</option>
        <option value="camiones">Camiones</option>
        <option value="choferes">Choferes</option>
    </select>
</div>
<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <div id="grid"></div>
</div>

<script>
@section JavascriptGlobalVariables {
};

@section JavascriptGlobalFunctions {
    function changeLanguageCall() {
        cargarInicialGrid();
    };

    function cargarInicialGrid() {
        $("#grid").kendoGrid({
            dataSource: {
                data: [],
                schema: {
                    model: {
                        fields: {
                        }
                    }
                },
                serverPaging: false,
                serverFiltering: false,
                serverSorting: false,
                pageSize: 20,
                serverPaging: false,
                serverFiltering: false,
                serverSorting: false
            },
            autoHeight: true,
            sortable: true,
            scrollable: false,
            filterable: {
                extra: false,
                operators: {
                    string: {
                        startswith: "Starts with",
                        eq: "Is equal to",
                        neq: "Is not equal to"
                    }
                }
            },
            pageable: {
                refresh: false,
                pageSizes: [10, 15, 20],
                info: false,
                input: false,
                numeric: true,
            },
            columns: [
                { field: "Cat1Col1", title: 'Cat1Col1' },
                { field: "Cat1Col2", title: 'Cat1Col2' },
                { field: "Cat1Col3", title: 'Cat1Col3' },
                { field: "Cat1Col4", title: 'Cat1Col4' },
                { field: "Cat1Col5", title: 'Cat1Col5' },
            ],
            dataBound: function (e) {
                $(".k-grid input.k-textbox").prop('readonly', true);
                $(".k-grid td .k-button").text('');
                $(".k-grid td:first-child, .k-grid td:last-child").css('text-overflow', 'clip');
            }
        });
    };
    $("#listaCatalogos").kendoDropDownList({
        change:function(e){
            var val=this.value();
            switch(val) {
                case "transpostistas":
                    actualizarGrid();
                    break;
                case "choferes":
                    actualizarGrid(Listado2);
                    break;
                case "camiones":
                    actualizarGrid(Listado3);
                    break;
            }
        }
    })
    function actualizarGrid(l){
        var grid = $("#grid").data("kendoGrid");
        var columnas=[];
        var claves=Object.keys(l[0]);
        claves.forEach(function(clave){
            columnas.push({"field":clave,"title":clave});
        })
        columnas.push({ command: ["edit", "destroy"], title: "&nbsp;", width: "250px" });
        var options=grid.options;
        console.log(options.dataSource.schema);
        options.columns=columnas;
        options.dataSource.data=l;
        options.editable="inline";
        grid.destroy();
        $("#grid").empty().kendoGrid(options);
    }
};

@section JavascriptDocumentReadyFunctions {
};
    
@section JavascriptDocumentReadyHomeCookie {
    //Cookies.set("home", true, { path: '/' });
    //Cookies.set("navegacion", "7", { path: '/' });
};

</script>
